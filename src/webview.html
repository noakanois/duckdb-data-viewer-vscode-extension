<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'none';
        style-src {{csp_source}} 'unsafe-inline';
        script-src 'nonce-{{nonce}}' 'unsafe-eval';
        worker-src blob:;
        connect-src {{csp_source}};
    ">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DuckDB Viewer</title>
    <script type="module" nonce="{{nonce}}" src="{{toolkit_uri}}"></script>
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
        margin: 0;
        /* --- ADDED PADDING --- */
        padding: 16px;
        background-color: var(--vscode-editor-background);
        color: var(--vscode-editor-foreground);
        display: flex;
        flex-direction: column;
        height: 100vh;
        box-sizing: border-box;
      }
      #status-wrapper {
        padding-bottom: 16px;
        border-bottom: 1px solid var(--vscode-editorWidget-border);
        margin-bottom: 16px;
        flex-shrink: 0;
      }
      #status {
        padding: 4px;
        border-radius: 4px;
      }
      #status.error {
        background-color: var(--vscode-errorForeground);
        color: var(--vscode-editor-background);
      }
      #controls {
        display: none;
        flex-direction: column;
        gap: 8px;
        margin-top: 16px;
        flex-shrink: 0;
      }
      #sql-input {
        width: 100%;
        min-height: 100px;
        padding: 8px;
        border-radius: 4px;
        border: 1px solid var(--vscode-editorWidget-border);
        background-color: var(--vscode-editorWidget-background);
        color: inherit;
        font-family: 'SFMono-Regular', Consolas, 'Courier New', monospace;
        resize: vertical;
      }
      #run-query {
        align-self: flex-start;
        padding: 6px 12px;
        border: 1px solid var(--vscode-button-border, transparent);
        border-radius: 4px;
        background-color: var(--vscode-button-background);
        color: var(--vscode-button-foreground);
        cursor: pointer;
      }
      #run-query:disabled {
        opacity: 0.6;
        cursor: default;
      }
      
      /* --- REPLACED TABLE STYLES --- */
      #results-container {
        display: none;
        overflow: hidden; /* The grid handles its own scrolling */
        width: 100%;
        flex-grow: 1;
      }
      /* The data grid component styles itself */
      vscode-data-grid {
        width: 100%;
        height: 100%;
      }
      /* Add a border around the whole grid */
      vscode-data-grid {
        border: 1px solid var(--vscode-editorWidget-border);
      }

      /* Add the horizontal lines (rows) */
      vscode-data-grid-row {
        border-bottom: 1px solid var(--vscode-editorWidget-border);
      }
      
      /* Add the vertical lines (cells) */
      vscode-data-grid-cell {
        border-right: 1px solid var(--vscode-editorWidget-border);
      }
    </style>
</head>
<body>
    <div id="status-wrapper">
      <div id="status">Initializing...</div>
    </div>
    
    <div id="results-container">
      <vscode-data-grid id="results-grid"></vscode-data-grid>
    </div>
    
    <div id="controls">
      <textarea id="sql-input"></textarea>
      <button id="run-query">Run Query</button>
    </div>

    <script nonce="{{nonce}}" src="{{webview_script_uri}}"></script>
</body>
</html>